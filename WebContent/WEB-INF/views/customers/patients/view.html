<div class="page-header">
	<h1>
		Patient Profile <small> <i
			class="ace-icon fa fa-angle-double-right"></i> <span
			th:text="${patient.title.acronym} + ' ' +  ${patient.surname} + ' ' + ${patient.firstName} + ' ' + ${patient.othernames} + ' ' + '-' + ' '  + ${patient.patientId} "></span>
		</small>
	</h1>
</div>

<div class="row">
	<div class="col-xs-12">
		<!-- Button for view -->
		<a class="btn btn-xs btn-info" th:href="@{/customers}"><i
			class="fa fa-home"></i> Customer Dashboard</a>
		<a class="btn btn-xs btn-success" th:href="@{/patients }"> <i
			class="glyphicon glyphicon-list"></i> All patients
		</a> <a class="btn btn-xs btn-primary"
			th:href="@{/patients/edit/{id} (id = ${patient.patientId})}"> <i
			class="fa fa-edit"></i> Edit profile
		</a> <a class="btn btn-xs btn-danger"
			th:href="@{/patients/delete/{id} (id = ${patient.patientId})}"> <i
			class="fa fa-trash-o"></i> Delete profile
		</a><a class="btn btn-xs btn-warning"
			th:href="@{/patients/documents/{id} (id = ${patient.patientId})}">
			<i class="fa fa-file"></i> Documents
		</a>
		<a class="btn btn-teal"
			th:href="@{/consultations/visits/configure/{id} (id = ${patient.patientId})}">
			CREATE VISIT 
		</a>
		<!-- <a class="btn btn-xs btn-teal tooltips"
			th:href="@{/consultations/visits/history/{patientId} ( patientId = ${patient.patientId})}">
			CREATE VISIT </a> -->
			
			<!-- <a class="btn btn-teal"
			th:href="@{/consultations/visits/history/{patientId} ( patientId = ${patient.patientId})}">
			CREATE VISIT 
		</a>  -->
	</div>
</div>
<div class="hr hr-18 dotted hr-double"></div>

<!-- <div class="row">
	<div class="col-xs-12">
		View contents here
		User Profile
		<div id="user-profile-2" class="user-profile">
			<div class="tabbable">
				<ul class="nav nav-tabs padding-18">
					<li class="active"><a data-toggle="tab" href="#home"> <i
							class="green ace-icon fa fa-user bigger-120"></i> Profile
					</a></li>
					<li class=""><a
						th:href="@{/patients/allergy/{id} (id = ${patient.patientId})}">
							<i class="brown ace-icon fa fa-leaf bigger-120"></i> Allergies
					</a></li>

					<li class=""><a
						th:href="@{/customers/patients/history/{id} (id = ${patient.id})}">
							<i class="brown ace-icon fa fa-plus-circle bigger-120"></i> Medical
							History
					</a></li>
					
					<li class=""><a
						th:href="@{/customers/patients/surgicalhistory/{id} (id = ${patient.id})}">
							<i class="brown ace-icon fa fa-ban bigger-120"></i> Surgical
							History
					</a></li>

					<li class=""><a
						th:href="@{/customers/patients/familyhistory/{id} (id = ${patient.id})}">
							<i class="brown ace-icon fa fa-male bigger-120"></i> Family
							History
					</a></li>
					
					<li class=""><a
						th:href="@{/customers/patients/socialhistory/{id} (id = ${patient.id})}">
							<i class="brown ace-icon fa fa-ban bigger-120"></i> Social
							History
					</a></li>

					<li class=""><a
						th:href="@{/customers/patients/documents/{id} (id = ${patient.id})}">
							<i class="brown ace-icon fa fa-file bigger-120"></i> Documents
					</a></li>
					<li class=""><a
						th:href="@{/customers/patients/nok/{id} (id = ${patient.id})}">
							<i class="brown ace-icon fa fa-file bigger-120"></i> Emergency
							Contact
					</a></li>

					<li class=""><a
						th:href="@{/customers/patients/hmo/{id} (id = ${patient.id})}">
							<i class="brown ace-icon fa fa-users bigger-120"></i> HMO
					</a></li>
					
					<li class=""><a
						th:href="@{/customers/patients/payment/{id} (id = ${patient.id})}">
							<i class="brown ace-icon fa fa-users bigger-120"></i> Payment Option
					</a></li>

					<li class=""><a
						th:href="@{/customers/patients/hmo/{id} (id = ${patient.id})}">
							<i class="brown ace-icon fa fa-exchange bigger-120"></i>
							Consultation History
					</a></li>
				</ul>

				<div class="tab-content no-border padding-24">
					<div id="home" class="tab-pane in active">
						<div class="row">
							<div class="col-xs-12 col-sm-3 col-md-3 center">
								<span class="profile-picture"> <img
									th:if="${patient.image == null}" id="avatar2" style="max-width: 120px"
									th:src="@{/resources/img/nhis.png}" alt="Profile"
									class="img-responsive" /> <img
									th:if="${patient.image != null}" id="avatar2" style="max-width: 120px"
									th:src="@{/patients/image/{id}(id=${patient.patientId})}"
									alt="Profile" class="img-responsive" />
								</span>

								<div class="space space-4"></div>
								<a class="btn btn-sm btn-block btn-success" href="#modal-simple"
									data-toggle="modal"> <i class="glyphicon glyphicon-picture"></i>
									Change Image
								</a>

							</div>
							/.col

							<div class="col-xs-12 col-sm-9">
								<h4 class="blue">
									<span class="middle"
										th:text="${patient.title.acronym} + ' ' + ${patient.surname} + ' ' + ${patient.firstName} + ' ' + ${patient.othernames}">Alex
										M. Doe</span>
								</h4>

								<div class="profile-info-row">
									<div class="profile-info-name">Patient Code</div>

									<div class="profile-info-value">
										<span th:text="${patient.patientCode}">alexdoe</span>
									</div>
								</div>
								
								<div class="profile-info-row">
									<div class="profile-info-name">Reference ID</div>

									<div class="profile-info-value">
										<span th:text="${patient.patientId}">alexdoe</span>
									</div>
								</div>


								<div class="profile-user-info">
									<div class="profile-info-row">
										<div class="profile-info-name">Email Address</div>

										<div class="profile-info-value">
											<span th:text="${patient.email}">alexdoe</span>
										</div>
									</div>

									<div class="profile-info-row">
										<div class="profile-info-name">Gender</div>

										<div class="profile-info-value">
											<span
												th:text="${patient.gender == null}? 'Not set' : ${patient.gender.type}">3
												hours ago</span>
										</div>
									</div>


									<div class="profile-info-row">
										<div class="profile-info-name">Marital Status</div>

										<div class="profile-info-value">
											<span
												th:text="${patient.maritalStatus == null}? 'Not set' : ${patient.maritalStatus.status}">3
												hours ago</span>
										</div>
									</div>


									<div class="profile-info-row">
										<div class="profile-info-name">Preffered Lang</div>

										<div class="profile-info-value">
											<span
												th:text="${patient.language == null}? 'Not set' : ${patient.language.name}">3
												hours ago</span>
										</div>
									</div>



									<div class="profile-info-row">
										<div class="profile-info-name">Home Address</div>

										<div class="profile-info-value">
											<i class="fa fa-map-marker light-orange bigger-110"></i> <span
												th:text="${patient.address == null}? 'Not set' : ${patient.address}">2010/06/20</span>
										</div>
									</div>


									<div class="profile-info-row">
										<div class="profile-info-name">LGA</div>

										<div class="profile-info-value">
											<span
												th:text="${patient.lga == null}? 'Not set' : ${patient.lga.localGovernmentAreasName}">3
												hours ago</span>
										</div>
									</div>


									<div class="profile-info-row">
										<div class="profile-info-name">State</div>

										<div class="profile-info-value">
											<span
												th:text="${patient.state == null}? 'Not set' : ${patient.state.stateName}">3
												hours ago</span>
										</div>
									</div>



								</div>

								<div class="hr hr-8 dotted"></div>
							</div>
							/.col
						</div>
						/.row

						<div class="space-20"></div>
					</div>
					/#home
				</div>
			</div>
		</div>

		Profile Ends 
		End View contents here
	</div>
</div> -->

<div class="row">
	<div class="col-xs-12">
		<!-- View contents here -->
		<div class="tabbable">

			<ul class="nav nav-tabs padding-18">
				<li class="active"><a data-toggle="tab" href="#home"> <i
						class="green ace-icon fa fa-pencil-square-o bigger-120"></i>
						Profile
				</a></li>
				<li class=""><a data-toggle="tab" href="#allergy"> <i
						class="brown ace-icon fa fa-user bigger-120"></i> Allergies
				</a></li>
				<li class=""><a data-toggle="tab" href="#rel"> <i
						class="brown ace-icon fa fa-user bigger-120"></i> Related Patients
				</a></li>
			</ul>
			<div class="tab-content no-border padding-24">

				<div id="home" class="tab-pane active">
					<div class="row">
						<div class="col-xs-12 col-sm-3 col-md-3 center">
							<span class="profile-picture"> <img
								th:if="${patient.image == null}" id="avatar2"
								style="max-width: 120px" th:src="@{/resources/img/nhis.png}"
								alt="Profile" class="img-responsive" /> <img
								th:if="${patient.image != null}" id="avatar2"
								style="max-width: 120px"
								th:src="@{/patients/image/{id}(id=${patient.patientId})}"
								alt="Profile" class="img-responsive" />
							</span>

							<div class="space space-4"></div>
							<a class="btn btn-sm btn-block btn-success" href="#modal-simple"
								data-toggle="modal"> <i class="glyphicon glyphicon-picture"></i>
								Change Image
							</a>

						</div>
						<!-- /.col -->

						<div class="col-xs-12 col-sm-9">
							<h4 class="blue">
								<span class="middle"
									th:text="${patient.title.acronym} + ' ' + ${patient.surname} + ' ' + ${patient.firstName} + ' ' + ${patient.othernames}">Alex
									M. Doe</span>
							</h4>

							<div class="profile-info-row">
								<div class="profile-info-name">Patient Code</div>

								<div class="profile-info-value">
									<span th:text="${patient.patientCode}">alexdoe</span>
								</div>
							</div>

							<div class="profile-info-row">
								<div class="profile-info-name">Reference ID</div>

								<div class="profile-info-value">
									<span th:text="${patient.patientId}">alexdoe</span>
								</div>
							</div>


							<div class="profile-user-info">
								<div class="profile-info-row">
									<div class="profile-info-name">Email Address</div>

									<div class="profile-info-value">
										<span th:text="${patient.email}">alexdoe</span>
									</div>
								</div>

								<div class="profile-info-row">
									<div class="profile-info-name">Gender</div>

									<div class="profile-info-value">
										<span
											th:text="${patient.gender == null}? 'Not set' : ${patient.gender.type}">3
											hours ago</span>
									</div>
								</div>


								<div class="profile-info-row">
									<div class="profile-info-name">Marital Status</div>

									<div class="profile-info-value">
										<span
											th:text="${patient.maritalStatus == null}? 'Not set' : ${patient.maritalStatus.status}">3
											hours ago</span>
									</div>
								</div>


								<div class="profile-info-row">
									<div class="profile-info-name">Preffered Lang</div>

									<div class="profile-info-value">
										<span
											th:text="${patient.language == null}? 'Not set' : ${patient.language.name}">3
											hours ago</span>
									</div>
								</div>



								<div class="profile-info-row">
									<div class="profile-info-name">Home Address</div>

									<div class="profile-info-value">
										<i class="fa fa-map-marker light-orange bigger-110"></i> <span
											th:text="${patient.address == null}? 'Not set' : ${patient.address}">2010/06/20</span>
									</div>
								</div>


								<div class="profile-info-row">
									<div class="profile-info-name">LGA</div>

									<div class="profile-info-value">
										<span
											th:text="${patient.lga == null}? 'Not set' : ${patient.lga.localGovernmentAreasName}">3
											hours ago</span>
									</div>
								</div>


								<div class="profile-info-row">
									<div class="profile-info-name">State</div>

									<div class="profile-info-value">
										<span
											th:text="${patient.state == null}? 'Not set' : ${patient.state.stateName}">3
											hours ago</span>
									</div>
								</div>



							</div>

							<div class="hr hr-8 dotted"></div>
						</div>
						<!-- /.col -->
					</div>
				</div>

				<!-- item -->
				<div id="allergy" class="tab-pane">
					<div class="row">
						<div class="col-md-12">
							<a class="btn btn-danger btn-xs" data-toggle="modal"
								href="#modal-simple1"> <i
								class="ace-icon fa fa-plus bigger-110"></i> Add Allergy
							</a>
							<div class="hr hr-18 dotted hr-double"></div>
							<div class="row">
								<div class="col-xs-12">

									<div class="table-header">Patient Allergy Assesment
										Detail</div>
									<table id="dTableA"
										class="table table-striped table-bordered table-hover">

										<thead>
											<tr>
												
												
												<th>Name</th>
												<th>Reactions</th>
												<th>Description</th>


												<th><i class="glyphicon glyphicon-asterisk"></i></th>
											</tr>
										</thead>
										<tbody>
											<tr th:each="patientAllergy : ${ pAllergyview}">
												<td th:text="${patientAllergy.name}"></td>
												<td th:text="${patientAllergy.reactions}"></td>
												<td th:text="${patientAllergy.description}"></td>
												<td>
												<!-- <a class="btn btn-xs btn-primary tooltips"
													title="view allergy"
													th:href="@{/patients/allergy/view/{pId}/{aId} (pId=${pa.patient.patientId}, aId=${pa.allergy.allergyId}) }">
														<i class="fa fa-eye"></i>
												</a> -->
												<a class="btn btn-xs btn-warning tooltips"
													title="Edit allergy"
													th:href="@{/patients/patientallergy/edit/{id}/{patientAllergyId} (id=${patientAllergy.patient.patientId}, patientAllergyId=${patientAllergy.id})}">
														<i class="fa fa-edit"></i>
												</a> 
												<a class="btn btn-xs btn-danger tooltips"
													title="delete allergy"
													th:href="@{/patients/patientallergy/delete/{id}/{patientId} (id=${patientAllergy.id},patientId=${patientAllergy.patient.patientId})}">
														<i class="fa fa-trash-o"></i>
												</a> 
												</td>
											</tr>
										</tbody>
									</table>
								</div>


							</div>
						</div>
					</div>

				</div>
				<!-- //.item -->

				<div id="rel" class="tab-pane">
					<div class="row">
						<div class="col-md-12">
							<div class="row">
								<div class="col-xs-12">
									<a class="btn btn-danger btn-xs"
										th:href="@{/relpatient/add/{id} (id=${patient.patientId})}">
										<i class="ace-icon fa fa-plus bigger-110"></i> Add Related
										Patient
									</a>
									<div class="hr hr-18 dotted hr-double"></div>
									<div class="table-header">Related Patient</div>
									<table id="dTable"
										class="table table-striped table-bordered table-hover">
										<!-- Table heading -->
										<thead>
											<tr>
												<th>Patient Code</th>
												<th>Surname</th>
												<th>First Name</th>
												<th>Relationship</th>
												<th>Email</th>
												<th><i class="glyphicon glyphicon-asterisk"></i></th>
											</tr>
										</thead>
										<!-- Table heading END -->
										<!-- Table body -->
										<tbody>
											<tr th:each="rel : ${relatedPatient}">
												<td th:text="${rel.patientCode}">patient Code</td>
												<td th:text="${rel.surname}">Surname</td>
												<td th:text="${rel.firstName}">Fiirstname</td>
												<td th:text="${rel.relationship}">Relationship</td>
												<td th:text="${rel.email}">email</td>
												<td><a class="btn btn-xs btn-primary tooltips"
													title="view patient details"
													th:href="@{/relpatient/view/{id}(id=${rel.PatientId})}">
														<i class="fa fa-eye"></i>
												</a> <a class="btn btn-xs btn-warning tooltips"
													title="edit patient"
													th:href="@{/relpatient/edit/{patientId}/{relPatientId}(patientId=${rel.patientId}, relPatientId=${rel.relPatientId})}">
														<i class="fa fa-edit"></i>
												</a>
												<a class="btn btn-xs btn-danger tooltips"
													title="delete relatedpatient"
													th:href="@{/relpatient/delete/{patientId}/{relPatientId} (patientId=${rel.patientId}, relPatientId=${rel.relPatientId})}">
														<i class="fa fa-trash-o"></i>
												</a> 
												</td>
											</tr>
										</tbody>
										<!-- Table body END -->
									</table>

								</div>


							</div>
						</div>
					</div>

				</div>

			</div>
		</div>
	</div>
</div>

<script>
	jQuery(function($) {
		var oTable1 = $('#dTableA').dataTable({
			bAutoWidth : false,
			"aoColumns" : [ {
				"bSortable" : true
			}, null, null, {
				"bSortable" : false
			} ]

		//,
		//"sScrollY": "200px",
		//"bPaginate": false,

		//"sScrollX": "100%",
		//"sScrollXInner": "120%",
		//"bScrollCollapse": true,
		//Note: if you are applying horizontal scrolling (sScrollX) on a ".table-bordered"
		//you may want to wrap the table inside a "div.dataTables_borderWrap" element

		//"iDisplayLength": 50
		});

	});
</script>

<script>
	jQuery(function($) {
		var oTable1 = $('#dTable').dataTable({
			bAutoWidth : false,
			"aoColumns" : [ {
				"bSortable" : true
			}, null, null, null, null, {
				"bSortable" : false
			} ]

		//,
		//"sScrollY": "200px",
		//"bPaginate": false,

		//"sScrollX": "100%",
		//"sScrollXInner": "120%",
		//"bScrollCollapse": true,
		//Note: if you are applying horizontal scrolling (sScrollX) on a ".table-bordered"
		//you may want to wrap the table inside a "div.dataTables_borderWrap" element

		//"iDisplayLength": 50
		});

	});
</script>

<div class="modal fade" id="modal-simple">
	<div class="modal-dialog">
		<div class="modal-content">
			<!-- Form -->
			<form th:action="@{/patients/imageUpload}" th:object="${imageForm}"
				method="post" enctype="multipart/form-data">
				<!-- Modal heading -->
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true">&times;</button>
					<h4 class="modal-title">Change Image</h4>
				</div>
			<!-- 	// Modal heading END -->
				<!-- Modal body -->
				<div class="modal-body">
					<div class="form-group">
						<label for="lastName"
							class="col-sm-3 control-label no-padding-right">Image:</label>
						<div class="col-sm-9">
							<input type="file" th:field="*{imageFile}" placeholder="image" /><span
								class="text-danger" th:if="${#fields.hasErrors('imageFile')}"
								th:errors="*{imageFile}"></span>
						</div>
					</div>
				</div>
				<!-- // Modal body END -->

				<!-- Modal footer -->
				<div class="modal-footer">
					<input type="hidden" th:field="*{id}" />
					<button class="btn btn-primary btn-xs" type="submit"
						id="save-changes">Upload image</button>
					<button type="button" class="btn btn-xs" data-dismiss="modal">Cancel</button>
				</div>
				<!-- // Modal footer END -->
			</form>
			<!-- /.Form -->
		</div>
	</div>
</div>

<div class="modal fade" id="modal-simple1">
	<div class="modal-dialog">
		<div class="modal-content">
			<!-- Form -->
			<!-- Modal heading -->
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-hidden="true">&times;</button>
				<h4 class="modal-title">Patient Allergy Assessment</h4>
			</div>
			<!-- // Modal heading END -->
			<!-- Modal body -->
			<div class="modal-body">
				<div class="row">
					<!-- Dropzone -->
					<div class="space space-4"></div>

					<!-- Dropzone -->


					<form role="form" class="form-horizontal" method="POST"
						th:object="${aForm}">
						
						<div class="form-group">
							<label for="detail"
								class="col-sm-3 control-label no-padding-right">Allergy
								Name:</label>
							<div class="col-sm-9">
								<select th:field="*{allergyId}" id="allergies"
									class="col-xs-10 col-sm-5">
									<option value="0">Select</option>
									<option th:each="c : ${allergies}"
										th:value="${c.allergyId}" th:text="${c.name}"></option>
								</select> <span class="text-danger"
									th:if="${#fields.hasErrors('allergyId')}" th:errors="allergyId"></span>

							</div>
						</div>

						<div class="form-group">
				<label for="name" class="col-sm-3 control-label no-padding-right">Name:</label>
				<div class="col-sm-9">
					<input type="text" class="col-xs-10 col-sm-5" id="allergyName"
						th:field="*{allergyName}"  /> <span
						class="text-danger" th:if="${#fields.hasErrors('allergyName')}"
						th:errors="*{allergyName}"></span>
				</div>
			</div>

						<div class="form-group">
							<label for="reactions"
								class="col-sm-3 control-label no-padding-right">Reactions:</label>
							<div class="col-sm-9">
								<textarea class="col-xs-10 col-sm-5"
									placeholder="Triggers, effects and Symptoms"
									th:field="*{reactions}"></textarea>
								<span class="text-danger"
									th:if="${#fields.hasErrors('reactions')}"
									th:errors="*{reactions}"></span>
							</div>
						</div>

						<div class="form-group">
							<label for="description"
								class="col-sm-3 control-label no-padding-right">Description:</label>
							<div class="col-sm-9">
								<textarea class="col-xs-10 col-sm-5"
									placeholder="medication and treatments"
									th:field="*{description}"></textarea>
								<span class="text-danger"
									th:if="${#fields.hasErrors('description')}"
									th:errors="*{description}"></span>
							</div>
						</div>

						<div class="clearfix form-actions">
							<div class="col-md-offset-3 col-md-9">
								<input type="hidden" th:field="*{patientId}" />
								<button class="btn btn-primary" type="submit">
									<i class="ace-icon fa fa-check bigger-110"></i> Add
								</button>

								<button class="btn btn-danger" type="reset">
									<i class="ace-icon fa fa-undo bigger-110"></i> Reset
								</button>
							</div>
						</div>
					</form>
					<!-- /.Dropzone -->
					<!-- /.col -->
				</div>
			</div>
			<!-- // Modal body END -->

			<!-- Modal footer -->
			<!-- // Modal footer END -->
			<!-- /.Form -->
		</div>
	</div>
</div>

<script>
$(function () {//main ===
	
    $('#allergies').change(function () {
       
		$('#allergyName').val($("#allergies :selected").text());
		//$('#dropbox').val($('#stkCode').val());
		
       
    });      
    
})

</script>

<!--  <script type="text/javascript">

 $(document).ready(function() {

	    $("#allergies option").filter(function() {
	        return $(this).val() == $("#firstname").val();
	    }).attr('selected', true);

	    $("#name").live("change", function() {

	        $("#firstname").val($(this).find("option:selected").attr("value"));
	    });
	});
</script> -->

 