<div class="page-header">
	<h1>
		Allergies <small> <i class="ace-icon fa fa-angle-double-right"></i>
			List of Allergy Categories
		</small>
	</h1>
</div>

<div class="row">
	<div class="col-xs-12">
		<!-- Button for view -->
		<a class="btn btn-xs btn-success" th:href="@{/admin}"><i
			class="fa fa-home"></i> Admin Dashboard</a> <a
			class="btn btn-xs btn-primary"
			th:href="@{/admin/medical/components/allergies}"><i
			class="fa fa-list"></i> All Allergies</a> <a
			class="btn btn-xs btn-warning"
			th:href="@{/admin/allergy/category/save}"><i
			class="fa fa-plus-circle"></i> Add Category</a>
			<div class="space-2"></div>
			<form  role="form" class="form-horizontal" method="POST"
					th:object="${orgform}">
			<input type="hidden" th:field="*{orgId}"/>			
          <input value="Refresh Allergy Category" id="submit_btn" class="btn btn-xs btn-primary"
									type="button" /> <span id="wait_tip" style="display: none;"><img
									th:src="@{/resources/images/ajax-loader.gif}" id="loading_img" />
									Please wait...</span>
       </form>
       		<div class="space-2"></div>
	</div>
</div>
<div class="hr hr-18 dotted hr-double"></div>

<div class="row">
	<div class="col-xs-12">
		<!-- View contentas here -->
		<div class="table-header">Results for categories</div>
		<table id="aTable"
			class="table table-striped table-bordered table-hover">
			<!-- Table heading -->
			<thead>
				<tr>
					<th>Name</th>
					<th>Parent</th>
					<th>Listed date</th>
					<th><i class="glyphicon glyphicon-asterisk"></i></th>
				</tr>
			</thead>
			<!-- // Table heading END -->
			<!-- Table body -->
			<tbody>
			
				<tr th:each="c : ${categories}">
					<td th:text="${c.name}">Name</td>
					<td th:text="${c.parentName}">Name</td>
					<td
						th:text="${ #dates.format(c.createDate, 'MMM dd, yyyy HH:mm a')}">Listed
						Date</td>
					<td><a class="btn btn-xs btn-warning tooltips"
						title="edit category details"
						th:href="@{/admin/allergy/category/edit/{id}(id=${c.allergyCategoryId}) }">
							<i class="fa fa-edit"></i>
					</a> <a class="btn btn-xs btn-danger tooltips"
						title="Delete category details"
						th:href="@{/admin/allergy/category/categories/delete/{id}(id=${c.allergyCategoryId}) }">
							<i class="fa fa-trash-o"></i>
					</a></td>
				</tr>
			</tbody>
			<!-- // Table body END -->
		</table>
		<!-- /. End view content here -->
	</div>
</div>
<script>
	jQuery(function($) {
		var oTable1 = $('#aTable').dataTable({
			bAutoWidth : false,
			"aoColumns" : [ {
				"bSortable" : true
			}, null, null, {
				"bSortable" : false
			} ]

		//,
		//"sScrollY": "200px",
		//"bPaginate": false,

		//"sScrollX": "100%",
		//"sScrollXInner": "120%",
		//"bScrollCollapse": true,
		//Note: if you are applying horizontal scrolling (sScrollX) on a ".table-bordered"
		//you may want to wrap the table inside a "div.dataTables_borderWrap" element

		//"iDisplayLength": 50
		});

	});
	$('#submit_btn').click(function() {
		 var orgId = $('#orgId').val();
			$.ajax({                                           
				contentType : "application/json; charset=utf-8",
				dataType : 'json', 
				type: 'GET',
				url : '/HMS/admin/allergy/category/refreshallergycategory/'+orgId,
				success: function() {
				    alert("success");
				    },
				error: function() {
				    alert("Added to List");
				    }
			});//ajax
			
		}); 
	
	function getId(id) {
		return document.getElementById(id);
	}
	
	
	
</script>